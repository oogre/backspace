<script type="text/javascript">
	var populateLastBackspace = function(data){
		$(".lastbackspace pre").html(data + " " + $(".lastbackspace pre").html());
	}

	window.addEventListener("load", function subscribeAndListen(){
		// When the document loads, send a request to users.testSocket
		// The controller code will subscribe you to all of the 'users' model instances (records)
		io.socket.get('/backspace/watch/');

		// Listen for the event called 'user'
		io.socket.on('backspace',function(obj){
			if(obj.verb == 'created'){
				populateLastBackspace(obj.data.backspcaced);
			}
		});

		$.ajax("/backspace/last").done(function(data){
			populateLastBackspace(data);
		});
	}, false)  	
</script>

<style type="text/css">
	.info blockquote{
		font-size: 1em;
	}
</style>

<div class="info">
	<div class="container">
		<div class="visible-lg-block visible-md-block row">
			<div class="col-md-12">
				<div class="col-md-offset-1 col-md-5">
					<br/>
					<br/>
					<blockquote class="blockquote-reverse"><%= __('intention1') %></blockquote>
				</div>
				<div class="col-md-6 lead">
					<%= __('intention0') %>
					<br/>
					<br/>
					<span class="lead"><%= __('intention2') %></span>
				</div>
			</div>
		</div>
		<div class="visible-sm-block visible-xs-block row">
			<div class="col-xs-12">
				<div class="lead">
					<%= __('intention0') %>
				</div>
				<div class="lead">
					<span class="lead"><%= __('intention2') %></span>
				</div>
				<blockquote><p><%= __('intention1') %></p></blockquote>
			</div>
		</div>
		<% if(!session.authenticated) { %>
		<div class="row">
			<div class="col-md-offset-6 col-md-6 highlight">
				<form action="/user/confirmation" method="POST" class="form-signin" id="signup-form">
					<h2 class="form-signin-heading"><%= __('form_signup_title') %></h2>
					<div class="form-group">
						<label for="inputEmail"><%= __('form_signup_email_label') %> :</label>
						<input id="inputEmail"type="email" class="form-control" placeholder="<%= __('form_signup_email')%>" name="email" data-required data-pattern="^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$"/>
					</div>
					<div class="form-group">
						<label for="password"><%= __('form_signup_pw_label') %> :</label>
						<input id="password" type="password" class="form-control" placeholder="<%= __('form_signup_pw')%>" name="password" minlength="6" data-required />
					</div>
					<div class="form-group">
						<input id="passwordConf" type="password" class="form-control" placeholder="<%= __('form_signup_pw_conf')%>" name="confirmation" minlength="6" data-required data-conditional="confirmation"/>
					</div>
					<br/>
					<div class="form-group">
						<input type="submit" class="btn btn-lg btn-primary" value="<%= __('form_signup_submit') %>" />
					</div>
					<input type="hidden" name="_csrf" value="<%= _csrf %>" />
				</form>
			</div>
		</div>
		<% } %>
	</div>
</div>

<div class="container">
	<div class="lastbackspace highlight">
		<h4>backspace : <small><%= __('live') %></small></h4>
		<pre></pre>
	</div>
</div>